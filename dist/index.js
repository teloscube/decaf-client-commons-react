var e=require("react"),n=require("@decafhub/decaf-client"),t=require("js-cookie");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=/*#__PURE__*/i(e),o=/*#__PURE__*/i(t);function l(n){return e.useEffect(function(){if(n.zendeskKey){var e=document.createElement("script");return e.src="https://static.zdassets.com/ekr/snippet.js?key="+n.zendeskKey,e.async=!0,e.id="ze-snippet",document.body.appendChild(e),window.zESettings=n.settings||{},function(){document.body.removeChild(e)}}},[n]),null}var r=a.default.createContext({client:void 0,me:void 0,publicConfig:void 0});function s(e){return a.default.createElement("div",{className:"spinner-wrapper"},a.default.createElement("style",null,"\n    .spinner-wrapper {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100vh;\n      flex-direction: column;\n    }\n    .spinner-text {\n      color: "+(e.titleColor||"#255d91")+";\n    }\n    .spinner {\n      width: "+(e.size||"40px")+";\n      height: "+(e.size||"40px")+";\n      position: relative;\n      margin: 10px auto;\n    }\n\n    .double-bounce1,\n    .double-bounce2 {\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n      background-color: "+(e.color||"#1890ff")+";\n      opacity: 0.6;\n      position: absolute;\n      top: 0;\n      left: 0;\n\n      -webkit-animation: sk-bounce 2s infinite ease-in-out;\n      animation: sk-bounce 2s infinite ease-in-out;\n    }\n\n    .double-bounce2 {\n      -webkit-animation-delay: -1s;\n      animation-delay: -1s;\n    }\n\n    @-webkit-keyframes sk-bounce {\n      0%,\n      100% {\n        -webkit-transform: scale(0);\n      }\n      50% {\n        -webkit-transform: scale(1);\n      }\n    }\n\n    @keyframes sk-bounce {\n      0%,\n      100% {\n        transform: scale(0);\n        -webkit-transform: scale(0);\n      }\n      50% {\n        transform: scale(1);\n        -webkit-transform: scale(1);\n      }\n    }\n  "),a.default.createElement("div",{className:"spinner"},a.default.createElement("div",{className:"double-bounce1"}),a.default.createElement("div",{className:"double-bounce2"})),e.title&&a.default.createElement("p",{className:"spinner-text"},e.title))}exports.DecafApp=function(t){var i=a.default.useState(void 0),c=i[0],d=i[1],u=a.default.useState(void 0),f=u[0],p=u[1],m=a.default.useState(void 0),b=m[0],v=m[1],k=a.default.useState(!0),g=k[0],h=k[1];return e.useEffect(function(){var e,t=(e=function(){var e=o.default.get("ember_simple_auth-session");if(e)try{var n,t=JSON.parse(e);return null==t||null==(n=t.authenticated)?void 0:n.token}catch(e){return void console.error("Can not parse authentication information!")}}())?n.buildDecafClient("",{token:e}):void 0;t?Promise.all([t.barista.get("/me/"),t.barista.get("/conf/public/")]).then(function(e){var n=e[0],i=e[1];console.log("meResp",n.data),console.log("configResp",i.data),d(t),p(n.data),v(i.data),h(!1)}).catch(function(e){console.log("Failed to load user and public config: ",e.message),d(void 0),p(void 0),v(void 0),h(!1)}):(h(!1),d(void 0),p(void 0),v(void 0))},[]),g?a.default.createElement(s,{title:"Please Wait..."}):(console.log("DecafApp:",c,f,b),void 0===c||void 0===f||void 0===b?(window.location.href="/webapps/waitress/production/?next="+window.location.href,null):a.default.createElement(r.Provider,{value:{client:c,me:f,publicConfig:b}},b.zendesk&&a.default.createElement(l,{zendeskKey:b.zendesk,settings:{contactForm:{fields:[{id:"name",prefill:{"*":f.fullname}},{id:"email",prefill:{"*":f.email}}]}}}),t.children))},exports.DecafSpinner=s,exports.ZendeskWidget=l,exports.useDecaf=function(){return e.useContext(r)};
//# sourceMappingURL=index.js.map
